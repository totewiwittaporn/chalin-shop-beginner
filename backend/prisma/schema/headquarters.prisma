/// ======================================
/// Headquarters & Alias (แยกจาก Branch)
/// ======================================

model Headquarters {
  id       Int     @id @default(autoincrement())
  code     String  @unique // เช่น "HQ" หรือ "MAIN"
  name     String // ชื่อจริงของสาขาหลัก (ใช้ทางธุรกิจ)
  isActive Boolean @default(true)

  // เจ้าของสต็อกจริง ใช้ Branch เดิมเป็นคลังกลาง
  stockBranchId Int?
  stockBranch   Branch? @relation(fields: [stockBranchId], references: [id])

  // ความสัมพันธ์อื่น
  aliases HeadquartersAlias[]

  // ✅ เพิ่ม: ความสัมพันธ์กับเทมเพลต
  docTemplates   DocTemplate[]
  tableTemplates TableTemplate[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([isActive])
}

model HeadquartersAlias {
  id             Int    @id @default(autoincrement())
  partnerId      Int
  headquartersId Int
  displayName    String // ชื่อ HQ ที่จะแสดงบนเอกสารสำหรับ partner รายนี้

  partner      ConsignmentPartner @relation(fields: [partnerId], references: [id])
  headquarters Headquarters       @relation(fields: [headquartersId], references: [id])

  @@unique([partnerId, headquartersId])
}
