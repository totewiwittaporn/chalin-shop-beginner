// prisma/schema/branches.prisma

model Branch {
  id           Int     @id @default(autoincrement())
  code         String  @unique // เช่น PNA-KRBR-GVT
  name         String
  addressLine1 String?
  addressLine2 String?
  addressLine3 String?

  // ✅ เพิ่มใหม่
  phone String? // เบอร์โทร
  taxId String? // เลขผู้เสียภาษี

  // มีอยู่แล้วก็ใช้ต่อได้ ถ้ายังไม่มี ให้เพิ่ม
  commissionRate Float? // ค่าคอมมิชชัน (%), เว้นว่างได้

  isActive Boolean @default(true)

  // relations
  users     User[]
  products  Product[]
  documents Document[]
  purchases Purchase[]

  createdAt    DateTime            @default(now())
  updatedAt    DateTime            @updatedAt
  Inventory    Inventory[]
  StockLedger  StockLedger[]
  StockCount   StockCount[]
  bankAccounts BranchBankAccount[]

  branchDeliveriesFrom BranchDelivery[] @relation("BranchDeliveryFrom")
  branchDeliveriesTo   BranchDelivery[] @relation("BranchDeliveryTo")

  consignDeliveriesFrom ConsignmentDelivery[] @relation("ConsignDeliveryFrom")
  consignDeliveriesTo   ConsignmentDelivery[] @relation("ConsignDeliveryReturnTo")

  // เอกสารโอนที่ “ออกจาก” สาขานี้
  transfersFrom Transfer[] @relation("TransferFromBranch")

  // เอกสารโอนที่ “เข้ามา” สาขานี้
  transfersTo  Transfer[]     @relation("TransferToBranch")
  Sale         Sale[]
  Headquarters Headquarters[]
}
