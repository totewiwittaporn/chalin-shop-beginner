// prisma/schema/branches.prisma

model Branch {
  id             Int      @id @default(autoincrement())
  code           String   @unique // เช่น PNA-KRBR-GVT
  name           String
  addressLine1   String?
  addressLine2   String?
  addressLine3   String?
  commissionRate Decimal? @db.Decimal(5, 2)
  isActive       Boolean  @default(true)

  // relations
  users     User[]
  products  Product[]
  documents Document[]
  purchases Purchase[]

  createdAt    DateTime            @default(now())
  updatedAt    DateTime            @updatedAt
  Inventory    Inventory[]
  StockLedger  StockLedger[]
  StockCount   StockCount[]
  bankAccounts BranchBankAccount[]

  // เอกสารโอนที่ “ออกจาก” สาขานี้
  transfersFrom Transfer[] @relation("TransferFromBranch")

  // เอกสารโอนที่ “เข้ามา” สาขานี้
  transfersTo Transfer[] @relation("TransferToBranch")
  Sale        Sale[]
}
