// prisma/schema/products.prisma

model ProductType {
  id        Int       @id @default(autoincrement())
  name      String    @unique

  products  Product[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Product {
  id            Int       @id @default(autoincrement())
  barcode       String    @unique
  name          String

  productTypeId Int?
  productType   ProductType? @relation(fields: [productTypeId], references: [id])

  costPrice     Decimal   @db.Decimal(12, 2)
  salePrice     Decimal   @db.Decimal(12, 2)

  // “ราคาสาขา” (ถ้ามีการตั้งราคาตามสาขา) — ตัวอย่างเก็บ owner branch
  branchId      Int?
  branch        Branch?   @relation(fields: [branchId], references: [id])

  // reverse relations
  items         DocumentItem[]
  maps          ConsignmentCategoryMap[]
  inventories   ConsignmentInventory[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([productTypeId])
  @@index([branchId])
}
